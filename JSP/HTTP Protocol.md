## HTTP (HyperText Transfer Protocol)
웹브라우저의 통신에 관한 최상위 계층의 *프로토콜로 Request 와 Response 의 형태로 이루어져있다.
클라이언트가 웹 페이지 링크를 클릭했을 때 브라우저는 HTTP 프로토콜의 요청 형태로 HTTP 메세지를 작성하여 웹 서버에 전송, 웹 서버에서는 해당 메세지가 <b>요청(Request)</b> 메세지임을 판단하고 데이터 분석 후 HTTP 프로토콜의 <b>응답(Response)</b> 형태로 메세지를 작성하여 브라우저로 보내면 브라우저는 메세지를 수신하여 클라이언트의 화면에 표시한다.
<h5> 프로토콜? <br>
컴퓨터 상호간의 대화에 필요한 통신 규약

<br>
<br>
<br>

### HTTP Request 메세지
HTTP 요청 메세지는 HTTP 메소드, 주소(URL), 정보 그리고 서버에 전달할 데이터인 <b>*폼 파라미터</b>로 구성된다.
HTTP 메소드는 클라이언트가 웹 서버가 해야 할 행동을 정해주는 정보로, Get, Post 메소드가 이에 속한다.

<h5>폼 파라미터? <br>
HTML 코드의 form 태그 안에 정의된 인자들을 '파라미터' 라 부르며 폼 전송이 일어날 때 HTTP 요청 메세지에 담겨서 폼 태그 내의 action 에 정의된 URL 로 전송된다. 이 때 폼 태그의 method 가 Get 으로 명시되는가. Post 로 명시되는가에 따라 전송 방식이 달라진다.

<BR>
<br>
<br>

### HTTP Response 메세지
HTTP 응답 메세지는 요청에 대한 서버의 처리 성공 여부를 표시하는 상태 코드 번호와 웹 서버가 응답해주는 콘텐츠의 타입 정보, 콘텐츠의 내용으로 구성된다.

<BR>

### Web Container
JSP 와 서블릿을 사용한 웹 서버는 크게 URL 주소의 해석을 담당하는 <B>HTTP 서버</B>, 서블릿 클래스 또는 JSP 파일의 실행 요청을 처리해주는 <B>웹 컨테이너</B>로 구성된다.
HTTP 서버는 단순히 주소(URL) 요청이 들어왔을 경우 그 주소에 미리 매핑된 콘텐츠를 사용자의 브라우저에 응답 형태로 전송하는 역할을 한다. 이 때 요청된 URL 이 서블릿 클래스 또는 JSP 파일일 경우 HTTP 서버는 이를 웹 컨테이너에서 처리하도록 클라이언트의 요청을 전달한다.
웹 컨테이너는 요청된 URL 에 맞는 서블릿 클래스 또는 JSP 파일을 실행하여 그 결과를 HTTP 서버에 넘겨주고, 이는 응답 메세지의 형태로 사용자의 브라우저에 전달된다.
ex) Tomcat

<BR>

## Servlet 의 동작 원리
서블릿은 서블릿 컨테이너라는 실행 환경에서만 동작된다.

### 1. 사용자의 URL 요청
클라이언트의 URL 요청이 서블릿 요청이라는 것을 웹 서버가 알기 위해서는 사전에 웹 서버측에 URL 과 서블릿 클래스를 매핑시켜놓은 <B>배포 서술자</B>가 필요하다.
웹 서버가 배포 서술자를 통해 받은 요청이 서블릿 요청이라고 판단하면 서블릿을 담당하는 웹 컨테이너로 해당 요청을 전달한다.

<br>

### 2. Request, Response 객체 생성
웹 컨테이너는 받은 요청을 처리하기 위해 Request 객체와 Response 객체를 생성한다.

<br>

### 3. 서블릿 인스턴스와 스레드 생성
Request, Response 객체 생성 후 사용자의 URL 요청이 어떤 서블릿 클래스를 필요로 하는지 배포 서술자를 통해 알아낸다. 해당 클래스에서 새로 인스턴스를 생성(메모리에 로드) 하고 init() 메소드를 실행하여 초기화한 뒤 스레드를 하나 생성한다. 이미 인스턴스가 존재할 경우 스레드만 생성한다. 서블릿 인스턴스는 웹 컨테이너당 하나만 존재하기에 init() 메소드는 서블릿당 한 번씩만 호출된다.

<br>

### 4. Service() 메소드 호출과 서블릿 클래스 실행
스레드가 생성되면 각 스레드에서 service() 메소드가 호출된다. HTTP 요청 방식이 Get 일 경우 서블릿 클래스의 doGet() 메소드가, Post 방식일 경우에는 doPost() 메소드가 Request, Response 객체를 인자로 자동 호출된다. 따라서 개발자가 실제로 동적인 웹 페이지 생성을 할 수 있는 코드를 만들어야 하는 부분은 doGet() 과 doPost() 메소드 부분이다.

<br>

### 5. 응답과 스레드의 소멸
doGet() 또는 doPost() 메소드가 호출되어 사용자의 요처에 따른 동적인 웹 페이지를 생성하면 결과물이 담긴 response 객체를 웹 컨테이너가 HTTP response 형태로 바꾸어 웹 서버로 전송한다. 그 뒤 사용이 끝난 Request, Response 객체를 소멸시키고 스레드를 종료하게 된다. 웹 서버는 전송받은 HTTP 응답 메세지를 사용자의 브라우저에 전송하고 사용자는 브라우저를 통해 동적인 페이지를 받아본다.
